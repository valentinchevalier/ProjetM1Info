
<div class="header">
    <div class="half" ng-include="SettingsService.templateUrl"></div>
    <div class="half" ng-include="UserService.templateUrl"></div>
</div>

<div class="workspace" ng-class="{drag_in_progress:isDragging}">
    <style>
        .widget_container {
            width : {{column_width}}% !important;
        }
        .row {
            height: {{row_height}}% !important;
        }
    </style>
    <div class='row' ng-repeat="row in emplacements">
        <div class="widget_container" ng-repeat="widget in row" ng-drop="widget.isEmpty" ng-drop-success="onWorkspaceDrop(widget.x,widget.y,$data)">
            <div class="widget"
                ng-class="{deletion:widget.deletion}"
                ng-hide="widget.isEmpty"
                ng-drag="!widget.isEmpty"
                ng-drag-start="startDragging(widget)"
                ng-drag-move="dragging()"
                ng-drag-stop="stopDragging()"
                ng-drag-data="{from:'workspace',xFrom:widget.x,yFrom:widget.y}"
                ng-drag-succes="removeWidget(widget.x,widget.y)"
                style="background-color:{{widget.data.color}}">

                <div class="drag_handle" ng-drag-handle>
                    <div class="handle_icon">
                        <span></span><span></span><span></span>
                    </div>
                </div>
                <p>{{widget.data.name}}</p>

            </div>
        </div>
    </div>
</div>


<div class="menu_container" ng-class="{'visible': isMenuVisible}">
    <div class="menu_btn" ng-drop="isDragging" ng-drop-success="onDeleteDrop($data,$event)" ng-mousemove="onBtnMouseover()">
        <a class="btn-floating" ng-click="toggleMenu()"><i class="material-icons fa {{buttonIcon}}"></i></a>
    </div>

    <div class="menu_widgets">
        <div class="menu_widget"
           ng-repeat="widget in availableWidgets"
           ng-class="{deletion:widget.deletion}"
           style="background-color:{{widget.color}}"
           ng-drag="true"
           ng-drag-start="startDragging(widget)"
           ng-drag-move="dragging()"
           ng-drag-stop="stopDragging()"
           ng-drag-data="{from:'menu',data:widget}" >
            <p>
                <span ng-if="widget.img_url == null">{{widget.name}}</span>
                <span ng-if="widget.img_url != null"><img src="{{widget.img_url}}"/></span>
            </p>
        </div>
    </div>
</div>
